---
title: Preparing the proof request
description: Create a request for a proof generation on the backend
---

# Quickstart
This is the simplest version of creating a proof request. 

## Import the library
```javascript
import { ReclaimProofRequest } from '@reclaimprotocol/js-sdk';
```

## Setup a request on the backend
```javascript
const reclaimProofRequest = await ReclaimProofRequest.init(
    'APP_ID',
    'APP_SECRET',
    'PROVIDER_ID'
)
```
- You can get the `APP_ID` and `APP_SECRET` using [this guide](/api-key)
- The `PROVIDER_ID` is the proof you want the user to generate. You can see all the [available providers here](https://dev.reclaimprotocol.org/explore).

## Send back the proof request object to the frontend
```javascript
const proofRequestObject = reclaimProofRequest.toJsonString();
```

## Sample implementation in Next.js
```javascript
import { NextResponse } from 'next/server';
import { ReclaimProofRequest } from '@reclaimprotocol/js-sdk';
 
export async function GET(request) {
  let providerId = 'example';

  // add logic to choose provider id here based on request

  proofRequestOptions = {
    ..., //other options, if any
    useAppClip: false,
    customSharePageUrl: 'https://portal.reclaimprotocol.org'
  }
  const proofRequest = await ReclaimProofRequest.init(      
      process.env.RECLAIM_APP_ID,
      process.env.RECLAIM_APP_SECRET,
      providerId,
      proofRequestOptions);

  // Initialize SDK with server-side environment variables (secure)
  const reclaimProofRequest = await ReclaimProofRequest.init(
      process.env.RECLAIM_APP_ID,
      process.env.RECLAIM_APP_SECRET,
      providerId,
  );

  // Convert to JSON string (safe for frontend)
  const proofRequestObject = reclaimProofRequest.toJsonString();

  return NextResponse.json({
      success: true,
      proofRequest: proofRequestObject
  });
}
```


# Advance Options
We recommend most, if not all of the following to be set for most production usecases :

## Set Context
You can set context to the proof request that helps identify the request when you receive it back in the callback once the proof is generated.
```
reclaimProofRequest.setContext('address', 'message')
```
- `address` : this is usually a unique identifier for the user. This could be an email address, a wallet address, or just a session id generated on your system
- `message` : this is an open field where you can add any other information that you want passed around from the build request to the callback endpoint. You can stringify jsons here for convenience. 



## Set Callback 

### Success Callback URL

```
reclaimProofRequest.setAppCallbackUrl(url, useJson)
```
Set a backend callback URL where Reclaim Protocol will POST proofs directly after verification. This enables secure backend proof processing without relying on frontend to upload the proof.

If `useJson` is set to `true`, it will send the proof as a raw JSON. Else, the POST body will contain the Proof JSON urlencoded. 
You can see the data structure of the proofs you will recieve [here](/troubleshooting/anatomy#proof).

### Error Callback URL

If something fails in the process of verifying, this callback url will be called with the [error codes as mentioned here](/troubleshooting/analytics-event#description-of-reclaim_exception-in-metadata)
```javascript
reclaimProofRequest.setErrorCallbackUrl("https://yourwebsite.tld/error-callback"); // POST request endpoint 
```

You can see the [data format here](/troubleshooting/anatomy#errors).

### Redirect Url
You can redirect the user to a webpage after the proof has been submitted
```javascript
reclaimProofRequest.setRedirectUrl("https://yourwebsite.com/reclaim-redirect"); // GET request webpage 
```

## Cancel Callback
If the user cancels the session midway, you will get a cancel callback with a datastructure mentioned [here](/troubleshooting/anatomy#cancelation).

```javascript
reclaimProofRequest.setCancelCallbackUrl("https://yourwebsite.com/reclaim-cancelcallback"); // POST request webpage 
```

## Cancel Redirect Url
If the user cancels the session midway or cancels after proof generation, you can redirect them to a separate webpage 
```javascript
reclaimProofRequest.setCancelRedirectUrl("https://yourwebsite.com/reclaim-cancelredirect); // GET webpage
```

## Set Parameters
If you already know what the value of the extracted parameter is supposed to be, you can set that using `setParams`.
For example, if you know that the user's name before hand - and you want them to prove something from a website and you need the name to match exactly, you should use set the name in the params. Be sure to use the same key as the parameter name on the Provider you are using.

If the extracted parameter doesn't match the set parameter, the proof generation will fail.
```javascript
reclaimProofRequest.setParams({ 
    name : "John Doe"
})
```


## Add additional metadata for verification client

Additional metadata to pass to the verification client. This can be used to customize the client experience, such as customizing themes or UI by passing context-specific information. 
The keys and values must be strings. For most clients, this is not required and goes unused.

```js
// Initialize with options
const proofRequest = await ReclaimProofRequest.init(APP_ID, APP_SECRET, PROVIDER_ID, {
  metadata: { theme: 'dark', verify_another_way_link: 'https://exampe.org/alternative-verification?id=1234', verify_another_way_callback: 'https://api.exampe.org/alternative-verification/callback?id=1234' },
});
```

If your app has "Verify Another Way" enabled, refer documentation from [here](/troubleshooting#handle-verify-another-way).

## Set preferred locale for verification client

You can change the language for the UI seen by User during verification by setting the `preferredLocale` parameter in the initialization options.

This is used to select a user's language and formatting preferences in the verification journey.

The value of this field must be a Unicode Language Identifier (i.e. without Locale extensions), except variants are not supported.
Locale values are expected to be canonicalized according to the "preferred value" entries in the [IANA Language Subtag Registry](https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry). 
For example, `he`, and `iw` are equal and both have the languageCode `he`, because `iw` is a deprecated language subtag that was replaced by the subtag `he`.

Defaults to the browser's locale if available, otherwise English (en).

```js
// Initialize with options
const proofRequest = await ReclaimProofRequest.init(APP_ID, APP_SECRET, PROVIDER_ID, {
  preferredLocale: 'en-US',
});
```

## Using the in-browser SDK
<Callout type="warning">
  In-Browser SDK use is available only for users on a premium enterprise plan. Please [contact support](https://t.me/protocolreclaim) for more details.
</Callout>

If you don't want to use the in-browser SDK, the users will be asked to install the Reclaim Protocol App/Appclip. You can disable by removing this configuration from the above snipped :
```js
//REMOVE :
proofRequestOptions = {
    ..., //other options, if any
    useAppClip: false,
    customSharePageUrl: 'https://portal.reclaimprotocol.org'
}
const proofRequest = await ReclaimProofRequest.init(appId, appSecret, providerId, proofRequestOptions);
```
[See reference implementation](https://github.com/reclaimprotocol/websdk-demo)
